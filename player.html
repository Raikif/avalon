<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Avalon - Player</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body class="player-page">
    <div class="player-container">
        
        <!-- Join Screen (Input Nama) -->
        <div id="joinScreen" class="screen">
            <div class="join-content">
                <h2>‚öîÔ∏è AVALON</h2>
                <p class="game-code-info">Game Code: <span id="displayGameCode">------</span></p>
                
                <div class="join-form">
                    <label for="nameInput">Enter Your Name</label>
                    <input 
                        type="text" 
                        id="nameInput" 
                        placeholder="Your name..." 
                        maxlength="15"
                        autocomplete="off"
                    >
                    <button id="joinGameBtn" class="btn btn-primary btn-large" disabled>
                        Join Game
                    </button>
                </div>
            </div>
        </div>

        <!-- Waiting Screen -->
        <div id="waitingScreen" class="screen hidden">
            <div class="waiting-content">
                <h2>‚öîÔ∏è AVALON</h2>
                <p class="player-name">Welcome, <span id="displayName">Player</span>!</p>
                <div class="loader"></div>
                <p>Waiting for host to start the game...</p>
                <p class="player-count-info">Players: <span id="playerCountInfo">0</span></p>
            </div>
        </div>

        <!-- Role Reveal Screen -->
        <div id="roleScreen" class="screen hidden">
            <div class="role-card" id="roleCard">
                <div class="role-card-inner">
                    <div class="role-card-front">
                        <p>üëÜ Tap to reveal your role</p>
                    </div>
                    <div class="role-card-back">
                        <h2 id="roleName">Loading...</h2>
                        <div id="roleIcon" class="role-icon">?</div>
                        <p id="roleTeam" class="role-team">Loading...</p>
                        <div id="roleInfo" class="role-info">
                            <p>Loading role information...</p>
                        </div>
                    </div>
                </div>
            </div>
            <button id="readyBtn" class="btn btn-primary hidden">I'm Ready</button>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen hidden">
            <!-- Player Status Bar -->
            <div class="status-bar">
                <span id="statusRole" class="status-role">Loading...</span>
                <span id="statusPhase" class="status-phase">Phase</span>
            </div>

            <!-- Team Selection (King Only) -->
            <div id="teamSelectionPanel" class="game-panel hidden">
                <h3>üëë You are the King!</h3>
                <p>Select <span id="teamSizeRequired">0</span> players for the mission:</p>
                <div id="playerSelectList" class="player-select-list"></div>
                <button id="confirmTeamBtn" class="btn btn-primary" disabled>Confirm Team</button>
            </div>

            <!-- Waiting for King -->
            <div id="waitingKingPanel" class="game-panel hidden">
                <h3>‚è≥ Waiting for King</h3>
                <p><span id="currentKingName">King</span> is selecting the team...</p>
                <div class="loader"></div>
            </div>

            <!-- Voting Panel -->
            <div id="votingPanel" class="game-panel hidden">
                <h3>üó≥Ô∏è Vote on Team</h3>
                <p>Do you approve this team?</p>
                <div id="proposedTeam" class="proposed-team"></div>
                <div class="vote-buttons">
                    <button id="approveBtn" class="btn btn-approve">‚úì Approve</button>
                    <button id="rejectBtn" class="btn btn-reject">‚úó Reject</button>
                </div>
            </div>

            <!-- Waiting for Votes -->
            <div id="waitingVotesPanel" class="game-panel hidden">
                <h3>‚è≥ Waiting for Votes</h3>
                <p>Other players are voting...</p>
                <div class="loader"></div>
            </div>

            <!-- Mission Panel -->
            <div id="missionPanel" class="game-panel hidden">
                <h3>üéØ You're on the Mission!</h3>
                <p>Choose your action:</p>
                <div class="mission-buttons">
                    <button id="successBtn" class="btn btn-success">‚úì Success</button>
                    <button id="failBtn" class="btn btn-fail hidden">‚úó Fail</button>
                </div>
                <p class="mission-hint" id="missionHint"></p>
            </div>

            <!-- Waiting for Mission -->
            <div id="waitingMissionPanel" class="game-panel hidden">
                <h3>‚è≥ Mission in Progress</h3>
                <p>Waiting for mission team to complete...</p>
                <div class="loader"></div>
            </div>

            <!-- Assassination Panel (Assassin Only) -->
            <div id="assassinationPanel" class="game-panel hidden">
                <h3>üó°Ô∏è Assassination</h3>
                <p>Good team won 3 missions, but you can still win!</p>
                <p><strong>Choose who you think is Merlin:</strong></p>
                <div id="assassinTargetList" class="player-select-list"></div>
                <button id="confirmKillBtn" class="btn btn-fail" disabled>üó°Ô∏è Assassinate</button>
            </div>

            <!-- Waiting for Assassination -->
            <div id="waitingAssassinPanel" class="game-panel hidden">
                <h3>üó°Ô∏è Assassination Phase</h3>
                <p>The Assassin is choosing their target...</p>
                <div class="loader"></div>
            </div>

            <!-- Game Over Panel -->
            <div id="gameOverPanel" class="game-panel hidden">
                <h2 id="resultText">Game Over</h2>
                <div id="yourRoleReveal"></div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/avalon-rules.js"></script>
    <script src="js/player.js"></script>
</body>
</html>
